(this.webpackJsonpfe=this.webpackJsonpfe||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(18),o=n.n(s),r=(n(27),n(28),n(21)),l=n(22),i=n(10),u=n(2),p=(n(29),n(0)),d=function(e){var t=e.contact,n=e.deleteContact,c=t.fullName,s=t.email,o=t.phone,r=t.address,l=t.avatar,u={_id:t._id},d=Object(a.useState)(!1),j=Object(i.a)(d,2),h=j[0],f=j[1],b=Object(a.useState)("black"),m=Object(i.a)(b,2),g=m[0],O=m[1],v=function(e){var t,n=e.target.getAttribute("data-id");t="file"==n?e.target.files[0]:e.target.innerText,u[n]=t},x=function(e){console.log(e),13==e.charCode&&e.preventDefault()};return Object(p.jsxs)("div",{className:"card",style:{backgroundColor:g},children:[h?Object(p.jsx)("input",{"data-id":"file",type:"file",onChange:v}):Object(p.jsx)("img",{src:"https://contacts-app-class.herokuapp.com/avatars/"+l}),Object(p.jsx)("div",{"data-id":"fullName",onKeyPress:x,onBlur:v,contentEditable:h,children:c}),Object(p.jsx)("div",{"data-id":"email",onKeyPress:x,onBlur:v,contentEditable:h,children:s}),Object(p.jsx)("div",{"data-id":"phone",onKeyPress:x,onBlur:v,contentEditable:h,children:o}),Object(p.jsx)("div",{"data-id":"address",onKeyPress:x,onBlur:v,contentEditable:h,children:r}),Object(p.jsx)("button",{onClick:function(){f(!h),O(h?"white":"lightblue")},children:"\u270f\ufe0f"}),Object(p.jsx)("button",{onClick:function(){console.log(u);var e=new FormData;Object.keys(u).forEach((function(t){e.append(t,u[t])}));var t={method:"POST",headers:{"x-auth-token":localStorage.getItem("token")},body:e};fetch("https://contacts-app-class.herokuapp.com/contacts/update",t).then((function(e){return e.json().then((function(e){"success"===e.status?(f(!1),O("green")):O("coral")}))})).catch((function(e){return O("coral")}))},children:"\ud83d\udcbe"}),Object(p.jsx)("button",{onClick:n,children:"\ud83d\uddd1\ufe0f"})]})};var j=function(){var e=this,t=Object(u.f)();Object(a.useEffect)((function(){localStorage.getItem("token")||t.push("/auth")}));var n={"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},c=Object(a.useState)({fullName:"",email:"",phone:"",address:""}),s=Object(i.a)(c,2),o=s[0],j=s[1],h=Object(a.useState)([{_id:"1",fullName:"test",email:"t@t.com",phone:"123456",address:"test"}]),f=Object(i.a)(h,2),b=f[0],m=f[1],g=function(e,t){var n=Object(l.a)({},o);n[t]=e.target.value,j(n)};Object(a.useEffect)((function(){fetch("https://contacts-app-class.herokuapp.com/contacts/all",{headers:n}).then((function(e){return e.json().then((function(e){"success"===e.status?m(e.data):console.log(e.message)}))}))}),[]);var O=function(e){fetch("https://contacts-app-class.herokuapp.com/contacts/"+e,{method:"DELETE",headers:n}).then((function(e){return e.json().then((function(e){if("success"===e.status){alert(e.message);var t=b.filter((function(t){if(t._id!==e.data)return t}));m(t)}else alert("There is an error. Check console for details"),console.log(e.message)}))})).catch((function(e){alert(e)}))},v=[];return"object"==typeof b&&b.length>0&&(v=b.map((function(t){return Object(p.jsx)(d,{contact:t,deleteContact:O.bind(e,t._id)},t._id)}))),Object(p.jsxs)("div",{className:"App",children:[Object(p.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("fullName",o.fullName),t.append("email",o.email),t.append("phone",o.phone),t.append("address",o.address),t.append("file",e.target[4].files[0]),console.log("finalForm",t);var n={method:"POST",headers:{"x-auth-token":localStorage.getItem("token")},body:t};fetch("https://contacts-app-class.herokuapp.com/contacts/new",n).then((function(e){return e.json().then((function(e){return m([].concat(Object(r.a)(b),[e]))}))}))},children:[Object(p.jsx)("input",{required:!0,placeholder:"Full name",value:o.fullName,onChange:function(e){return g(e,"fullName")}}),Object(p.jsx)("input",{type:"email",placeholder:"Email",value:o.email,onChange:function(e){return g(e,"email")}}),Object(p.jsx)("input",{type:"tel",placeholder:"Phone number",value:o.phone,onChange:function(e){return g(e,"phone")}}),Object(p.jsx)("input",{placeholder:"Address",value:o.address,onChange:function(e){return g(e,"address")}}),Object(p.jsx)("input",{type:"file"}),Object(p.jsx)("button",{className:"create-button",children:"Create Contact"})]}),Object(p.jsx)("section",{className:"contact-list",children:v})]})};n(36);var h=function(e){var t=Object(u.f)();return Object(p.jsx)("div",{className:"wrapper",children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(e);var n={};n.email=e.target[0].value,n.pass=e.target[1].value;var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};"register"===e.nativeEvent.submitter.id?fetch("https://contacts-app-class.herokuapp.com/auth/register",a).then((function(e){return e.json().then((function(e){"success"===e.status?alert("Congrats, you are registered! Please log in."):alert(e.message)}))})):"login"===e.nativeEvent.submitter.id&&fetch("https://contacts-app-class.herokuapp.com/auth/login",a).then((function(e){return e.json().then((function(e){alert(e.message),console.log(e),localStorage.setItem("token",e.token),t.push("/contacts")}))}))},children:[Object(p.jsx)("input",{name:"email",type:"email"}),Object(p.jsx)("input",{name:"pass",type:"password"}),Object(p.jsxs)("section",{children:[Object(p.jsx)("input",{id:"register",type:"submit",value:"Register"}),Object(p.jsx)("input",{id:"login",type:"submit",value:"Login"})]})]})})},f=n(20),b=(n(37),function(){return Object(p.jsx)("div",{id:"get-contact",children:Object(p.jsxs)("form",{className:"contact-form",onSubmit:function(e){e.preventDefault(),console.log(e);var t=new FormData;t.append("fullName",e.target[0].value),t.append("email",e.target[1].value),t.append("phone",e.target[2].value),t.append("message",e.target[3].value),Array.from(e.target[4].files).forEach((function(e){t.append("attachs",e)}));var n,a=Object(f.a)(t.values());try{for(a.s();!(n=a.n()).done;){var c=n.value;console.log(c)}}catch(s){a.e(s)}finally{a.f()}console.log(Object.fromEntries(t));fetch("https://contacts-app-class.herokuapp.com/get-contact",{method:"POST",body:t}).then((function(e){return e.json().then((function(e){"success"===e.status?console.log("Congats"):console.log(e.message)}))}))},children:[Object(p.jsx)("input",{type:"text",placeholder:"Full Name"}),Object(p.jsx)("input",{type:"email",placeholder:"Email"}),Object(p.jsx)("input",{type:"tel",placeholder:"Phone"}),Object(p.jsx)("textarea",{type:"text",placeholder:"Message"}),Object(p.jsx)("input",{type:"file",multiple:!0}),Object(p.jsx)("button",{children:"Get Contact"})]})})}),m=n(7),g=(n(38),function(e){return Object(p.jsxs)("nav",{children:[Object(p.jsx)(m.b,{exact:!0,className:"nav-item",activeClassName:"active",to:"/",children:"Home"}),Object(p.jsx)(m.b,{exact:!0,className:"nav-item",activeClassName:"active",to:"/contacts",children:"Contacts"}),Object(p.jsx)(m.b,{exact:!0,className:"nav-item",activeClassName:"active",to:"/get-contact",children:"Get Contact"})]})});var O=function(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(g,{}),Object(p.jsxs)(u.c,{children:[Object(p.jsx)(u.a,{path:"/auth",children:Object(p.jsx)(h,{})}),Object(p.jsx)(u.a,{path:"/contacts",children:Object(p.jsx)(j,{})}),Object(p.jsx)(u.a,{path:"/get-contact",children:Object(p.jsx)(b,{})}),Object(p.jsx)(u.a,{path:"/",children:Object(p.jsx)(h,{})})]})]})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),s(e),o(e)}))};o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(m.a,{children:Object(p.jsx)(O,{})})}),document.getElementById("root")),v()}},[[39,1,2]]]);
//# sourceMappingURL=main.acae26a5.chunk.js.map